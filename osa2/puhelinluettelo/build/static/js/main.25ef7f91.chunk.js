(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t.n(c),o=t(15),a=t.n(o),u=(t(20),t(3)),i=t(0),s=function(e){return Object(i.jsx)("form",{children:Object(i.jsxs)("div",{children:["filter shown with",Object(i.jsx)("input",{type:"text",name:"name",onChange:function(n){return e.handleFilter(n.target.value)}})]})})},l=function(e){return Object(i.jsxs)("form",{onSubmit:e.addPerson,children:[Object(i.jsxs)("div",{children:["name:",Object(i.jsx)("input",{type:"text",name:"name",value:e.newName,onChange:function(n){return e.handleNameChange(n.target.value)}})]}),Object(i.jsxs)("div",{children:["number:",Object(i.jsx)("input",{type:"text",name:"number",value:e.newNumber,onChange:function(n){return e.handleNumberChange(n.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){return Object(i.jsx)("div",{children:e.persons.filter((function(n){return n.name.toLowerCase().includes(e.filter.toLowerCase())})).map((function(n){return Object(i.jsxs)("div",{children:[n.name," ",n.number,Object(i.jsx)("button",{name:n.name,onClick:function(t){return e.deletePerson(t,n.id,n.name)},children:"delete"})]},n.name)}))})},j=t(4),f=t.n(j),m="/api/persons",b=function(){return f.a.get(m).then((function(e){return e.data}))},h=function(e){return f.a.post(m,e).then((function(e){return e.data}))},O=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.messageType;return null===n?null:"error"===t?Object(i.jsx)("div",{className:"error",children:n}):Object(i.jsx)("div",{className:"message",children:n})},x=function(e){var n=e.message;return null===n?null:Object(i.jsx)("div",{className:"error",children:n})},g=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(u.a)(o,2),j=a[0],f=a[1],m=Object(c.useState)(""),g=Object(u.a)(m,2),w=g[0],N=g[1],C=Object(c.useState)(""),P=Object(u.a)(C,2),y=P[0],S=P[1],k=Object(c.useState)(null),T=Object(u.a)(k,2),D=T[0],E=T[1],F=Object(c.useState)(null),I=Object(u.a)(F,2),J=I[0],L=I[1];Object(c.useEffect)((function(){console.log("effect"),b().then((function(e){r(e),console.log("data",e)}))}),[]),console.log("render",t.length,"persons");return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(v,{message:D}),Object(i.jsx)(x,{message:J}),Object(i.jsx)(s,{value:y,handleFilter:function(e){S(e)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(l,{handleNameChange:function(e){f(e)},handleNumberChange:function(e){N(e)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===j})),c={name:j,number:w};t.some((function(e){return e.name===j}))?(window.confirm("".concat(j," is already added to phonebook, replace the old number with a new one?")),O(n.id,c).then((function(e){r(t.map((function(t){return t.id!==n.id?t:e}))),f(""),N(""),E('Person "'.concat(n.name,'" phone number change on server')),setTimeout((function(){E(null)}),5e3)})).catch((function(e){L('Person "'.concat(j,'" was already removed from server')),r(t.filter((function(e){return e.id!==n.id})))})),setTimeout((function(){L(null)}),5e3)):h(c).then((function(e){r(t.concat(e)),f(""),N(""),E('Added "'.concat(e.name,'"')),setTimeout((function(){E(null)}),5e3)}))},newName:j,newNumber:w}),Object(i.jsx)("h2",{children:"numbers"}),Object(i.jsx)(d,{persons:t,filter:y,deletePerson:function(e,n,c){e.preventDefault(),console.log("ID joka poistetaan: ",n),window.confirm("Delete ".concat(c,"?"))?(console.log("Delete"),p(n).then(r(t.filter((function(e){return e.id!==n})))).catch((function(e){L('Person "'.concat(c,'" was already removed from server')),setTimeout((function(){E(null)}),5e3)})),E('Person "'.concat(c,'" removed from server')),setTimeout((function(){E(null)}),5e3)):console.log("Perutaan poisto")}})]})};a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.25ef7f91.chunk.js.map